003-ItemGet:
  - name: Spiral Charge Text
    type: textpatch
    index: 27
    text: "You learned the \x0E\x00\x03\x02\x05Spiral Charge\x0E\x00\x03\x02\uFFFF!"
  - name: Change Spiral Charge Scene change
    type: flowpatch
    index: 584 # change it to give Spiral Charge Storyflag
    flow:
      subType: 0
      param1: 0
      param2: 364
      param3: 0
  - name: Remove Goddess Sword Scene change
    type: flowpatch
    index: 462 # skip scene change after getting goddess sword
    flow:
      next: -1
  - name: Goddess Longsword Text
    type: textpatch
    index: 16
    text: "You got the \x0E\x00\x03\x02\x05Goddess Longsword\x0E\x00\x03\x02\uFFFF!\nThe flames of Farore have improved your\nsword, making it longer and sharp enough\nto do twice as much damage!"
  - name: Goddess Whitesword Text
    type: textpatch
    index: 12
    text: "You got the \x0E\x00\x03\x02\x05Goddess White Sword\x0E\x00\x03\x02\uFFFF!\nThe flames of Nayru have transformed\nyour blade, expanding Fi's powers.\n\nShe can now help you use your \x0E\x00\x03\x02\x00dowsing\x0E\x00\x03\x02\uFFFF\nability to search for more objects!"
  - name: Master Sword Text
    type: textpatch
    index: 17
    text: "You got the \x0E\x00\x03\x02\x05Master Sword\x0E\x00\x03\x02\uFFFF!\nThe flames of Din have imbued your\nblade with a sacred white light that\ndemons revile."
  - name: True Master Sword Text
    type: textpatch
    index: 19
    text: "You got the \x0E\x00\x03\x02\x05True Master Sword\x0E\x00\x03\x02\uFFFF!\nThe goddess has blessed your blade, and\nthe Master Sword has at last achieved its\nultimate form!"
  - name: Harp Text
    type: textpatch
    index: 21
    text: "You got the \x0E\x00\x03\x02\x05Goddess's Harp\x0E\x00\x03\x02\uFFFF!\nBut there's no time to admire it!"
  - name: Emerald Tablet text
    type: textpatch
    index: 227
    text: "You got the \x0E\x00\x03\x02\x05Emerald Tablet\x0E\x00\x03\x02\uFFFF!\nThe weathered surface of this heavy stone\ntablet feels very old."
  - name: Ruby Tablet text
    type: textpatch
    index: 228
    text: "You got the \x0E\x00\x03\x02\x05Ruby Tablet\x0E\x00\x03\x02\uFFFF!\nThe weathered surface of this heavy stone\ntablet feels very old."
  - name: Amber Tablet text
    type: textpatch
    index: 229
    text: "You got the \x0E\x00\x03\x02\x05Amber Tablet\x0E\x00\x03\x02\uFFFF!\nThe weathered surface of this heavy stone\ntablet feels very old."
  - name: Farore's Courage Text
    type: textpatch
    index: 237
    text: "You learned \x0E\x00\x03\x02\x05Farore's Courage\x0E\x00\x03\x02\uFFFF!"
  - name: Nayru's Wisdom Text
    type: textpatch
    index: 238
    text: "You learned \x0E\x00\x03\x02\x05Nayru's Wisdom\x0E\x00\x03\x02\uFFFF!"
  - name: Din's Power Text
    type: textpatch
    index: 239
    text: "You learned \x0E\x00\x03\x02\x05Din's Power\x0E\x00\x03\x02\uFFFF!"
  - name: Faron SotH text
    type: textpatch
    index: 240
    text: "You learned the \x0E\x00\x03\x02\x05Water Dragon's Song\x0E\x00\x03\x02\uFFFF!\nThis is a part of the \x0E\x00\x03\x02\x05Song of the Hero\x0E\x00\x03\x02\uFFFF!"
  - name: Eldin SotH text
    type: textpatch
    index: 241
    text: "You learned the \x0E\x00\x03\x02\x05Fire Dragon's Song\x0E\x00\x03\x02\uFFFF!\nThis is a part of the \x0E\x00\x03\x02\x05Song of the Hero\x0E\x00\x03\x02\uFFFF!"
  - name: Lanayru SotH text
    type: textpatch
    index: 242
    text: "You learned the \x0E\x00\x03\x02\x05Thunder Dragon's Song\x0E\x00\x03\x02\uFFFF!\nThis is a part of the \x0E\x00\x03\x02\x05Song of the Hero\x0E\x00\x03\x02\uFFFF!"
  - name: Full SotH text
    type: textpatch
    index: 243
    text: "The \x0E\x00\x03\x02\x05Song of the Hero\x0E\x00\x03\x02\uFFFF is now complete!"
  - name: Single Gratitude crystal counter
    type: textpatch
    index: 45 # \x0e\x02\x03\x06\x00\x00\xcd is for showing numeric arg0
    text: "You got \x0e\x00\x03\x02\x00five\x0e\x00\x03\x02\uFFFF \x0e\x00\x03\x02\x05Gratitude Crystals\x0e\x00\x03\x02\uFFFF!\nThat is \x0e\x00\x03\x02\x00\x0e\x02\x03\x06\x00\x01\xcd\x0e\x00\x03\x02\uFFFF in Total!"
  - name: Single Gratitude crystal counter
    type: textpatch
    index: 62 # \x0e\x02\x03\x06\x00\x00\xcd is for showing numeric arg0
    text: "You got \x0e\x00\x03\x02\x00one\x0e\x00\x03\x02\uFFFF \x0e\x00\x03\x02\x05Gratitude Crystal\x0e\x00\x03\x02\uFFFF!\nThat is \x0e\x00\x03\x02\x00\x0e\x02\x03\x06\x00\x01\xcd\x0e\x00\x03\x02\uFFFF in Total!"
  - name: Zelda dowsing in Key Piece
    type: flowpatch
    index: 677
    flow:
      next: -1
  - name: remove BotG Scene Change # also goes to open thunderhead
    type: flowpatch
    index: 464
    flow:
      next: BotG opens Thunderhead
  - name: BotG opens Thunderhead
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 194
      next: -1
      param3: 0
  - name: get rid of Skyloft layer 8&9
    type: flowpatch
    index: 540 # before storyflag
    flow:
      next: -1 # after Storyflag
    # after the last tear is picked up, patch it so that the flag for the trial is set
  - name: to set faron trial storyflag
    type: flowpatch
    index: 401
    flow:
      next: set faron trial storyflag
  - name: set faron trial storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 919
      next: -1
      param3: 0
  - name: to set eldin trial storyflag
    type: flowpatch
    index: 441
    flow:
      next: set eldin trial storyflag
  - name: set eldin trial storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 920
      next: -1
      param3: 0
  - name: to set lanayru trial storyflag
    type: flowpatch
    index: 451
    flow:
      next: set lanayru trial storyflag
  - name: set lanayru trial storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 921
      next: -1
      param3: 0
  - name: to set skyloft trial storyflag
    type: flowpatch
    index: 446
    flow:
      next: set skyloft trial storyflag
  - name: set skyloft trial storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 922
      next: -1
      param3: 0
  - name: Go to Harp Storyflag
    type: flowpatch
    index: 71
    flow:
      next: Goddess Harp Storyflag
  - name: Goddess Harp Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 9
      next: Groose lands in Faron Storyflag
      param3: 0
  - name: Groose lands in Faron Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 140
      next: -1
      param3: 0
  - name: Go to Letter Storyflag
    type: flowpatch
    index: 377
    flow:
      next: Letter Storyflag
  - name: Letter Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 547
      next: -1
      param3: 0
  - name: Go to Horned Colossus Beetle Storyflag
    type: flowpatch
    index: 380
    flow:
      next: Horned Colossus Beetle Storyflag
  - name: Horned Colossus Beetle Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 476
      next: -1
      param3: 0
  # full SotH will be given once all 3 Parts are collected
  - name: For Faron To Check Full SotH
    type: flowpatch
    index: 472
    flow:
      next: Check Faron SotH 1
  - name: For Eldin To Check Full SotH
    type: flowpatch
    index: 471
    flow:
      next: Check Faron SotH 1
  - name: For Lanayru To Check Full SotH
    type: flowpatch
    index: 475
    flow:
      next: Check Faron SotH 1
  - name: Check Faron SotH 1
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 190 # item id
      param2: 1 # seems to be some count, always 1 for items
      next: Check Faron SotH 2
      param3: 23 # check_item_flag command, result is carried to next switch
  - name: Check Faron SotH 2
    type: switchadd
    flow:
      subType: 6
      param2: 0
      param3: 7 # use result from previous chck
    cases:
      - Check Eldin SotH 1 # true
      - -1                 # false
  - name: Check Eldin SotH 1
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 191 # item id
      param2: 1 # seems to be some count, always 1 for items
      next: Check Eldin SotH 2
      param3: 23 # check_item_flag command, result is carried to next switch
  - name: Check Eldin SotH 2
    type: switchadd
    flow:
      subType: 6
      param2: 0
      param3: 7 # use result from previous chck
    cases:
      - Check Lanayru SotH 1 # true
      - -1                   # false
  - name: Check Lanayru SotH 1
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 192 # item id
      param2: 1 # seems to be some count, always 1 for items
      next: Check Lanayru SotH 2
      param3: 23 # check_item_flag command, result is carried to next switch
  - name: Check Lanayru SotH 2
    type: switchadd
    flow:
      subType: 6
      param2: 0
      param3: 7 # use result from previous chck
    cases:
      - Give full SotH # true
      - -1             # false
  - name: Give full SotH
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 193 # item
      param3: 9
      next: 477 # to full SotH text
  - name: To Set Adventure Pouch Storyflag
    type: flowpatch
    index: 603
    flow:
      next: Set Adventure Pouch Storyflag
  - name: Set Adventure Pouch Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 30 # adventure pouch unlocked
      next: -1
      param3: 0
  - name: To Set Adventure Pouch counter
    type: flowpatch
    index: 604
    flow:
      next: Add pouch slot
  - name: Add pouch slot
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 490 # counterindex
      param2: 1 # count
      next: -1
      param3: 25 # add to counter command
  - name: To Set Faron Pillar Storyflag
    type: flowpatch
    index: 385
    flow:
      next: Set Faron Pillar Storyflag
  - name: Set Faron Pillar Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 46 # Faron Pillar
      next: -1
      param3: 0
  - name: To Set Eldin Pillar Storyflag
    type: flowpatch
    index: 384
    flow:
      next: Set Eldin Pillar Storyflag
  - name: Set Eldin Pillar Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 47 # Eldin Pillar
      next: -1
      param3: 0
  - name: To Set Lanayru Pillar Storyflag
    type: flowpatch
    index: 389
    flow:
      next: Set Lanayru Pillar Storyflag
  - name: Set Lanayru Pillar Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 48 # Lanayru Pillar
      next: -1
      param3: 0
  - name: Always same Bomb text
    type: flowpatch
    index: 180
    flow:
      next: 161
  - name: To Fill Bombs
    type: flowpatch
    index: 161
    flow:
      next: Fill Bombs
  - name: Fill Bombs
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 499 # counterindex
      param2: 10 # count
      next: 414
      param3: 25 # add to counter command
  - name: Sea Chart unlocks Ship Dowsing
    type: flowpatch
    index: 528
    flow:
      next: Sea Chart dowsing
  - name: Sea Chart dowsing
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 271 # Ship Dowsing
      next: Open Dowsing wheel
      param3: 0
  - name: Open Dowsing wheel
    type: flowadd
    flow:
      type: type3
      subType: 6
      param1: 0
      param2: 7
      next: -1
      param3: 56
008-Hint:
  # check for 7 storyflags: required dungeon 1 to 6, then gate of time storyflag, if all are preset, set 11 & 13 so that imp2 can be fought
  - name: Rando Dungeon check
    type: entryadd
    entry:
      name: "008_007"
      value: Rando Set Zone CS Flag
  - name: Rando Dungeon 1 check
    type: switchadd
    flow:
      subType: 6
      param2: 902 # Beat Required Dungeon 1
      param3: 3
    cases:
      - Rando Dungeon 2 check
      - -1
  - name: Rando Dungeon 2 check
    type: switchadd
    flow:
      subType: 6
      param2: 903 # Beat Required Dungeon 2
      param3: 3
    cases:
      - Rando Dungeon 3 check
      - -1
  - name: Rando Dungeon 3 check
    type: switchadd
    flow:
      subType: 6
      param2: 926 # Beat Required Dungeon 3
      param3: 3
    cases:
      - Rando Dungeon 4 check
      - -1
  - name: Rando Dungeon 4 check
    type: switchadd
    flow:
      subType: 6
      param2: 927 # Beat Required Dungeon 4
      param3: 3
    cases:
      - Rando Dungeon 5 check
      - -1
  - name: Rando Dungeon 5 check
    type: switchadd
    flow:
      subType: 6
      param2: 928 # Beat Required Dungeon 5
      param3: 3
    cases:
      - Rando Dungeon 6 check
      - -1
  - name: Rando Dungeon 6 check
    type: switchadd
    flow:
      subType: 6
      param2: 929 # Beat Required Dungeon 6
      param3: 3
    cases:
      - Rando GoT check
      - -1
  - name: Rando GoT check
    type: switchadd
    flow:
      subType: 6
      param2: 141 # Ballad of the Goddess played with impa
      param3: 3
    cases:
      - Rando Set Rails Storyflag
      - -1
  # checks were successfull, imp2 can be fought now!
  - name: Rando Set Rails Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 11 # make rails appear, originally AC
      next: Rando Set Dungeons Completed Storyflag
      param3: 0
  - name: Rando Set Dungeons Completed Storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 13 # originally fire sanctuary
      next: Rando imp 2 skip Storyflag
      param3: 0
  - name: Rando imp 2 skip Storyflag
    type: flowadd
    onlyif: Option "imp2-skip" Disabled
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: -1 # nothing
      next: -1
      param3: 0
  - name: Rando imp 2 skip Storyflag
    type: flowadd
    onlyif: Option "imp2-skip" Enabled
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 132 # Imp 2 Defeated
      next: -1
      param3: 0
  - name: Rando Set Zone CS Flag # activates the CS after dungeons, or does nothing, zone temp flag 3
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 3
      param2: 11
      next: Rando Dungeon 1 check
      param3: 4
102-Zelda:
  - name: Fledge Quest Switch 1
    type: flowpatch
    index: 230
    flow:
      param2: 36 # always trigger
  - name: Fledge Quest Switch 2
    type: flowpatch
    index: 229
    flow:
      param2: 36 # always trigger
105-Terry:
  - name: Beedle's Crystal # Can't reach that right now
    type: flowpatch
    index: 115
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Buying Bug Net Switch
    type: flowpatch
    index: 82
    flow:
      param2: 36 # always trigger
  - name: Can't buy Pouch text
    type: textadd
    text: "You need an \x0E\x00\x03\x02\x05Adventure Pouch\x0E\x00\x03\x02\uFFFF to buy\nthis!"
  - name: go to Check for Pouch
    type: flowpatch
    index: 16
    flow:
      next: Check for Pouch
  - name: Show can't buy Pouch text
    type: flowadd
    flow:
      type: type1
      next: -1
      param3: 87
      param4: Can't buy Pouch text
  - name: Check for Pouch
    type: switchadd
    flow:
      subType: 6
      param2: 30 # Adventure pouch unlocked
      param3: 3
    cases:
      - 43 # do event as normal
      - Show can't buy Pouch text
106-DrugStore:
  - name: Potion Lady Bottle # skip pouch requirements
    type: flowpatch
    index: 42
    flow:
      next: 44 # give item
  - name: Requirement for Stamina Potion
    type: flowpatch
    index: 103
    flow:
      param2: 914
107-Kanban:
  - name: Knight Academy Billboard skip condition
    type: flowpatch
    index: 37
    flow:
      next: 38
  # added during generation with correct text
  # - name: Knight Academy Billboard text
  #   type: textpatch
  #   index: 18
  #   text: "Required dungeons:\nA\nB"
108-ShinkanA:
  - name: Owlans Shield
    type: flowpatch
    index: 169
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      next: 173 # end of owlans text
      param3: 9
      param4: 0
      param5: 0
109-TakeGoron:
  - name: Peater's Crystal 1
    type: flowpatch
    index: 79
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Peater's Crystal 2
    type: flowpatch
    index: 92
    flow:
      next: 79
110-DivingGame:
  - name: Fun Fun Owner's Quest requirement
    type: flowpatch
    index: 38
    flow:
      param2: 36 # always trigger
  - name: Fun Fun Owner's Crystal
    type: flowpatch
    index: 60
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
111-FortuneTeller:
  - name: Skip over Water Basin dowsing
    type: flowpatch
    index: 99
    flow:
      param2: 668
  - name: Skip over Wheel opening
    type: flowpatch
    index: 104
    flow:
      param2: 96
115-Town2:
  - name: Parrow's Empty Bottle
    type: flowpatch
    index: 734
    flow:
      next: 735 # jump to give item
  - name: Parrow's Spores Bottle
    type: flowpatch
    index: 199
    flow:
      next: 747 # to item
  - name: Parrow's Crystal 1
    type: flowpatch
    index: 814
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Parrow's Crystal 2
    type: flowpatch
    index: 788
    flow:
      next: 814
  - name: Feldge's Crystal
    type: flowpatch
    index: 325
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Baby's Crystal
    type: flowpatch
    index: 125
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Orrielle's Crystal
    type: flowpatch
    index: 225
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Ghost's Crystal
    type: flowpatch
    index: 522
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Pipit's Crystal
    type: flowpatch
    index: 641
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Skip Clawshot Requirement for Rattle Delivery
    type: flowpatch
    index: 7
    flow:
      next: 8
  - name: Change Cawlin storyflag
    type: flowpatch
    index: 165
    flow:
      param2: 924
  - name: Fix switch (Cawlin)
    type: flowpatch
    index: 33
    flow:
      param2: 924
  - name: Fix switch (Cawlin)
    type: flowpatch
    index: 141
    flow:
      param2: 36 # always trigger
      param3: 3 # check Storyflag
  - name: add Cawlin storyflag to other text options
    type: flowpatch
    index: 507
    flow:
      next: 503
116-InsectGame:
  - name: Fix switch 1
    type: flowpatch
    index: 25
    flow:
      param2: 925
  - name: Fix switch 2
    type: flowpatch
    index: 61
    flow:
      param2: 925
  - name: Fix switch 3
    type: flowpatch
    index: 24
    flow:
      param2: 36 # always trigger
  - name: getting item from Strich flag
    type: flowpatch
    index: 68
    flow:
      param2: 925
117-Pumpkin:
  - name: Kina Crystal Quest
    type: flowpatch
    index: 93
    flow:
      type: switch
      subType: 6
      param2: 901 # new FS flag
      param3: 3
      param4: 2
      param5: 60
  - name: Kina's Crystal
    type: flowpatch
    index: 386
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: playing Harp with Kina 1
    type: flowpatch
    index: 434
    flow:
      param2: 9 # Harp
  - name: playing Harp with Kina 2
    type: flowpatch
    index: 80
    flow:
      param2: 9 # Harp
  - name: playing Harp with Kina 3
    type: flowpatch
    index: 579
    flow:
      param2: 9 # Harp
  - name: Fs requirement for Kina Quest
    type: flowpatch
    index: 93
    flow:
      param2: 36 # always trigger
  - name: ET requirement for Pumpkin Quest
    type: flowpatch
    index: 78
    flow:
      param2: 36 # always trigger
  - name: Fix Bartender
    type: flowpatch
    index: 212 # collected pumpkin soup
    flow:
      next: 520 # normal conversation past pumpkin soup
118-Town3:
  - name: Wryna's Crystal
    type: flowpatch
    index: 144
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Sparrot's Crystal
    type: flowpatch
    index: 141
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Owlan's Crystal
    type: flowpatch
    index: 157
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
120-Nushi:
  - name: Fix Levias
    type: flowpatch
    index: 7
    flow:
      next: 21 # never talk about triforce or song of the hero
  - name: Skip bokobase story flag
    type: flowpatch
    index: 22
    flow:
      next: -1 # don't set bokobase
  - name: Give item after levias
    type: entryadd
    entry:
      name: "120_03"
      value: After levias event start
  - name: After levias event start
    type: flowadd
    flow:
      type: start
      next: give item after levias
  - name: give item after levias
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: 37 # set unset story flag
      param3: 9
121-AkumaKun:
  - name: Never say cursed medal chest text
    type: flowpatch
    index: 9 # start
    flow:
      next: 120 # normal text
123-Town5:
  - name: Peatrice's Crystal
    type: flowpatch
    index: 316
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
  - name: Pipit's Mom's Crystal
    type: flowpatch
    index: 186
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      param3: 9
      param4: 0
      param5: 0
150-Siren:
  - name: to unset trial storyflag
    type: flowpatch
    index: 38
    flow:
      next: 81
  - name: unset trial storyflag on failure
    type: flowadd
    index: 81
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 922
      next: -1
      param3: 1 # unset storyflag
200-Forest:
  - name: give slingshot directly
    type: flowpatch
    index: 595
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      next: -1 # elder talks after gotten sligshot
      param3: 9
      param4: 0
      param5: 0
  - name: Skip over Zelda Dowsing
    type: flowpatch
    index: 410
    flow:
      next: 128
  - name: Skip over Zelda Dowsing 2
    type: flowpatch
    index: 440
    flow:
      next: -1
  - name: Skip over Zelda Dowsing 3
    type: flowpatch
    index: 343
    flow:
      next: -1
  - name: Skip over Zelda Dowsing 3
    type: flowpatch
    index: 635
    flow:
      next: -1
  - name: Skip over Fi text after locateing machi
    type: flowpatch
    index: 91
    flow:
      next: 335
  - name: From storyflag after machi to sceneflag
    type: flowpatch
    index: 335
    flow:
      next: 618
  - name: End after machi sceneflag
    type: flowpatch
    index: 618
    flow:
      next: -1
  - name: Skip over Fi text after locateing Oolo
    type: flowpatch
    index: 32
    flow:
      next: -1
  - name: Skip over Fi text after locateing Erla
    type: flowpatch
    index: 676
    flow:
      next: -1
  - name: Skip over Fi text after locateing Lopsa
    type: flowpatch
    index: 165
    flow:
      next: -1
201-ForestD1:
  - name: give item after beating skyview
    type: flowpatch
    index: 6
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: 87
      param3: 9
      param4: 0
      param5: 0
  - name: rando required dungeon storyflag
    type: flowpatch
    index: 87
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: -1 # will be filled in later if this is a required dungeon
      next: 81
      param3: 0
  - name: to rando dungeons completed check
    type: flowpatch
    index: 81
    flow:
      type: type3
      subType: 1
      param1: 8 # entrypoint 008_007
      param2: 7
      next: -1
      param3: 7
202-ForestD2:
  - name: Give item after AC
    type: entryadd
    entry:
      name: "202_31"
      value: After AC event start
  - name: After AC event start
    type: flowadd
    flow:
      type: start
      next: give item after beating ancient cistern
  - name: give item after beating ancient cistern
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: rando required dungeon storyflag
      param3: 9
  - name: rando required dungeon storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: -1 # will be filled in later if this is a required dungeon
      next: to rando dungeons completed check
      param3: 0
  - name: to rando dungeons completed check
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 8 # entrypoint 008_007
      param2: 7
      next: -1
      param3: 7
  # make sure central statue can be moved down again, for that allow the player to
  # talk to the tablet and then lower the statue and reload
  - name: Statue Lower Question
    type: textpatch
    index: 9
    text: "Do you want to reset the statue?\n\x0E\x01\x00\x02\uFFFFYes\x0E\x01\x01\x02\x00No"
  - name: Replace Stone Tablet Fi Event
    type: flowpatch
    index: 7
    flow:
      next: Statue Lower Switch
  - name: Statue Lower Switch
    type: switchadd
    flow:
      type: switch
      subType: 6
      param2: 0
      param3: 2
    cases:
      - Unset Question Trigger then lower Statue # yes
      - Unset Question Trigger # no
  - name: Unset Question Trigger
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 60 # 60 triggers fi
      param2: 12
      next: -1
      param3: 3
  - name: Unset Question Trigger then lower Statue
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 60 # 60 triggers fi
      param2: 12
      next: Unset Raise Statue Sceneflag
      param3: 3
  - name: Unset Raise Statue Sceneflag
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 126
      param2: 12
      next: Unset Lower Statue Sceneflag
      param3: 3
  - name: Unset Lower Statue Sceneflag
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 100
      param2: 12
      next: Unset Valve on Top Sceneflag
      param3: 3
  - name: Unset Valve on Top Sceneflag
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 121
      param2: 12
      next: Trigger Exit
      param3: 3
  - name: Trigger Exit
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 0
      param2: 0
      next: -1
      param3: 10
203-ForestF2:
  - name: Skip over Scared Water dowsing
    type: flowpatch
    index: 62
    flow:
      next: 468

250-ForestSiren:
  - name: shorten fi text
    type: flowpatch
    index: 1
    flow:
      next: 78
  # unset trial storyflag on fail
  - name: to unset Trial storyflag
    type: flowpatch
    index: 37
    flow:
      next: unset Trial storyflag
  - name: unset Trial storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 919
      next: -1
      param3: 1 # unset storyflag
299-Demo:
  - name: Skip setting sword itemflag
    type: flowpatch
    index: 2
    flow:
      next: 3
300-Mountain:
  - name: Skip over Zelda Dowsing
    type: flowpatch
    index: 281
    flow:
      next: -1
301-MountainD1:
  - name: give item after beating earth temple
    type: flowpatch
    index: 22
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: 20 # goes to beat ET story flag
      param3: 9
      param4: 0
      param5: 0
  - name: rando required dungeon storyflag
    type: flowpatch
    index: 21
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: -1 # will be filled in later if this is a required dungeon
      next: 59
      param3: 0
  - name: to rando dungeons completed check
    type: flowpatch
    index: 59
    flow:
      type: type3
      subType: 1
      param1: 8 # entrypoint 008_007
      param2: 7
      next: -1
      param3: 7
303-MountainF2:
  - name: skip over Water Basin dowsing
    type: flowpatch
    index: 128
    flow:
      param2: 668
  - name: skip over Water Basin dowsing
    type: flowpatch
    index: 289
    flow:
      param2: 134
304-MountainD2:
  - name: Give item before CS
    type: flowpatch
    index: 5
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: 6
      param3: 9
      param4: 0
      param5: 0
  - name: rando required dungeon storyflag
    type: flowpatch
    index: 6
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: -1 # will be filled in later if this is a required dungeon
      next: 94
      param3: 0
  - name: to rando dungeons completed check
    type: flowpatch
    index: 94
    flow:
      type: type3
      subType: 1
      param1: 8 # entrypoint 008_007
      param2: 7
      next: -1
      param3: 7
350-MountainSairen:
  - name: to unset trial storyflag
    type: flowpatch
    index: 30
    flow:
      next: unset trial storyflag on failure
  - name: unset trial storyflag on failure
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 920
      next: -1
      param3: 1 # unset storyflag
399-Demo:
  - name: Skip setting sword itemflag
    type: flowpatch
    index: 0
    flow:
      next: 1
400-Desert:
  - name: give item after harp CS
    type: flowpatch
    index: 286
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 0 # item
      next: 287 # end
      param3: 9
      param4: 0
      param5: 0
  - name: rando required dungeon storyflag
    type: flowpatch
    index: 287
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: -1 # will be filled in later if this is a required dungeon
      next: 288
      param3: 0
  - name: to rando dungeons completed check
    type: flowpatch
    index: 288
    flow:
      type: type3
      subType: 1
      param1: 8 # entrypoint 008_007
      param2: 7
      next: -1
      param3: 7
  - name: Fix Hook Beetle check # the robot doesn't give the item after harp
    type: flowpatch
    index: 39
    flow:
      next: 5
  - name: skip over Zelda dowsing
    type: flowpatch
    index: 133
    flow:
      next: -1
401-DesertD2:
  - name: give item after beating sandship
    type: flowpatch
    index: 45
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: 46
      param3: 9
      param4: 0
      param5: 0
  - name: rando required dungeon storyflag
    type: flowpatch
    index: 46
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: -1 # will be filled in later if this is a required dungeon
      next: set sandship storyflag
      param3: 0
  - name: set sandship storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 15 # sandship beaten
      next: to rando dungeons completed check
      param3: 0
  - name: to rando dungeons completed check
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 8 # entrypoint 008_007
      param2: 7
      next: -1
      param3: 7
  - name: Main Deck dungeon beaten entry
    type: entryadd
    entry:
      name: "401_19"
      value: Check Tentalus defeated Switch
  - name: Check Tentalus defeated Switch
    type: switchadd
    flow:
      subType: 6
      param2: 933 # tentalus defeated
      param3: 3
    cases:
      - 45 # continue if storyflag set
      - -1 # do nothing if not set
  - name: Fi text text to leave dungeon
    type: textadd
    unk1: 2
    text: "You can't beat this\ndungeon at the present\ntime, I would suggest\ncoming back later"
  - name: Fi trigger to leave
    type: entryadd
    entry:
      name: "401_18"
      value: Fi text to leave
  - name: Fi text to leave
    type: flowadd
    flow:
      type: type1
      next: set tentalus defeated storyflag
      param3: 171
      param4: 57
  - name: set tentalus defeated storyflag
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 933 # tentalus defeated
      next: Leave dungeon trigger
      param3: 0
  - name: Leave dungeon trigger
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 1 # exit
      param2: 0 # current room
      next: -1
      param3: 10
402-DesertF2:
  - name: Never ask player to go inside shark mouth for ship dowsing
    type: flowpatch
    index: 17
    flow:
      next: 276
450-DesertSiren:
  - name: to unset trial storyflag
    type: flowpatch
    index: 30
    flow:
      next: unset trial storyflag on failure
  - name: unset trial storyflag on failure
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 921
      next: -1
      param3: 1 # unset storyflag
499-Demo:
  - name: Skip setting sword itemflag
    type: flowpatch
    index: 6
    flow:
      next: 7
500-CenterField:
  - name: to SG intro cs storyflag
    type: flowpatch
    index: 114
    flow:
      next: Set SG intro in Groose cs
  - name: Set SG intro in Groose cs
    type: flowadd
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 137
      next: -1
      param3: 0
  - name: Zelda dowsing in Key Piece
    type: flowpatch
    index: 495
    flow:
      next: 492
501-Inpa:
  - name: got to rando dungeons completed check
    type: flowpatch
    index: 267
    flow:
      next: to rando dungeons completed check
  - name: to rando dungeons completed check
    type: flowadd
    flow:
      type: type3
      subType: 1
      param1: 8 # entrypoint 008_007
      param2: 7
      next: -1
      param3: 7
502-CenterFieldBack:
  - name: Zelda's Cutscene, give item from impa # this is overriding a set sceneflag, which is not needed anymore
    type: flowpatch
    index: 17
    flow:
      type: type3
      subType: 0
      param1: 0
      param2: 3 # item
      next: 16
      param3: 9
      param4: 0
      param5: 0
  - name: Zelda's Cutscene, trigger CS # auto trigger CS, so above mentioned sceneflag is useless
    type: flowpatch
    index: 16
    flow:
      type: type3
      subType: 1
      param1: 2 # trigger exit 2
      param2: 2 # room 2
      next: -1
      param3: 10
599-Demo:
  - name: Skip setting sword itemflag
    type: flowpatch
    index: 6
    flow:
      next: 7
